<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Brahmastra Gaming Store</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;800&display=swap" rel="stylesheet">

<style>
  body {
    background:#0b0b10;
    color:#f9fafb;
    font-family:system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  }

  .card {
    background:#0f1218;
    border:1px solid #1f2430;
    transition:transform .25s ease, box-shadow .25s ease, border-color .25s ease;
    position:relative;
    border-radius:0.75rem;
    overflow:hidden;
  }
  .card:hover {
    transform:translateY(-4px);
    border-color:#4b5563;
    box-shadow:0 15px 35px rgba(0,0,0,0.6);
  }

  .discount {
    background:#b91c1c;
    padding:2px 8px;
    font-size:11px;
    font-weight:600;
    border-radius:999px;
  }
  .old {
    color:#9ca3af;
    text-decoration:line-through;
    font-size:13px;
  }
  .price {
    color:#22c55e;
    font-size:20px;
    font-weight:700;
  }
  .btn {
    background:#111827;
    color:#d1d5db;
    border-radius:0.5rem;
  }
  .btn:hover {
    background:#1f2937;
    color:#f9fafb;
  }

  .glass {
    background:rgba(17,24,39,.8);
    backdrop-filter:blur(10px);
    border-radius:0.75rem;
    border:1px solid rgba(55,65,81,.7);
  }

  .upcoming-track {
    display:flex;
    width:max-content;
    animation:scroll 25s linear infinite;
  }
  @keyframes scroll {
    from { transform:translateX(0); }
    to   { transform:translateX(-50%); }
  }

  .showBox {
    width:160px;
    background:#111827;
    border-radius:12px;
    padding:10px;
    flex-shrink:0;
  }
  .showBox img {
    height:120px;
    width:100%;
    object-fit:cover;
    border-radius:8px;
  }
  @media (min-width:640px) {
    .showBox { width:200px; }
    .showBox img { height:140px; }
  }
  @media (min-width:1024px) {
    .showBox { width:240px; }
    .showBox img { height:160px; }
  }

  .logoText {
    font-family:'Orbitron',sans-serif;
    font-size:26px;
    letter-spacing:2px;
    background:linear-gradient(90deg,#22c55e,#3b82f6,#a855f7);
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
    text-shadow:0 0 10px rgba(34,197,94,.6),0 0 20px rgba(59,130,246,.4);
  }

  #modalInner {
    max-height:90vh;
    overflow-y:auto;
  }

  input[type=number]::-webkit-outer-spin-button,
  input[type=number]::-webkit-inner-spin-button {
    -webkit-appearance:none;
    margin:0;
  }
  input[type=number] {
    -moz-appearance:textfield;
  }
</style>
</head>
<body class="min-h-screen">

<!-- NAV -->
<header class="bg-black/90 backdrop-blur flex justify-between items-center px-4 py-3 sticky top-0 z-50 border-b border-gray-800">
  <div class="flex items-center gap-2">
    <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-green-500 via-blue-500 to-purple-500 flex items-center justify-center text-xs font-bold">BG</div>
    <div class="logoText">BRAHMASTRA</div>
  </div>
  <div class="flex items-center">
    <button onclick="toggleWishlist()" class="relative flex items-center gap-2 px-3 py-1 rounded-lg bg-gray-900 hover:bg-gray-800 mr-2">
      <span class="text-lg">‚ô°</span>
      <span class="text-sm">Wishlist</span>
      <span class="absolute -top-1 -right-1 bg-pink-500 text-black text-xs font-bold rounded-full px-1.5 py-0.5" id="wishlistCount">0</span>
    </button>
    <button onclick="toggleCart()" class="relative flex items-center gap-2 px-3 py-1 rounded-lg bg-gray-900 hover:bg-gray-800">
      <span class="text-lg">üõí</span>
      <span class="text-sm">Cart</span>
      <span class="absolute -top-1 -right-1 bg-green-500 text-black text-xs font-bold rounded-full px-1.5 py-0.5" id="cartCount">0</span>
    </button>
  </div>
</header>

<!-- UPCOMING -->
<section class="p-4 overflow-hidden">
  <div class="flex items-center justify-between mb-2">
    <h2 class="text-yellow-400 font-semibold tracking-wide">‚è≥ Upcoming Releases</h2>
    <span class="text-xs text-gray-400">Auto scrolling showcase</span>
  </div>
  <div class="overflow-hidden rounded-xl border border-gray-800 bg-gradient-to-r from-gray-900/70 via-black to-gray-900/70">
    <div id="upcomingTrack" class="upcoming-track py-3 px-2"></div>
  </div>
</section>

<!-- SEARCH / FILTER -->
<section class="p-3 border-y border-gray-900 bg-black/50">
  <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-5 gap-2">
    <input id="search" placeholder="Search game..." class="p-2 bg-black border border-gray-700 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-purple-500">
    <input id="minP" type="number" placeholder="Min ‚Çπ" class="p-2 bg-black border border-gray-700 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-purple-500">
    <input id="maxP" type="number" placeholder="Max ‚Çπ" class="p-2 bg-black border border-gray-700 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-purple-500">
    <button onclick="render()" class="bg-purple-600 hover:bg-purple-700 p-2 rounded-md text-sm font-semibold">Apply Filters</button>
    <select id="sortBy" class="p-2 bg-black border border-gray-700 rounded-md text-sm">
      <option value="">Sort: Default</option>
      <option value="price-asc">Price: Low to High</option>
      <option value="price-desc">Price: High to Low</option>
      <option value="name-asc">Name: A ‚Üí Z</option>
    </select>
  </div>

  <div class="mt-3 flex flex-wrap gap-2 text-xs">
    <button class="px-3 py-1 rounded-full bg-gray-800 hover:bg-gray-700" onclick="applyChip('best-deals')">
      Best Deals (40%+ OFF)
    </button>
    <button class="px-3 py-1 rounded-full bg-gray-800 hover:bg-gray-700" onclick="applyChip('under-999')">
      Under ‚Çπ999
    </button>
    <button class="px-3 py-1 rounded-full bg-gray-800 hover:bg-gray-700" onclick="applyChip('reset')">
      Reset Filters
    </button>
  </div>
</section>

<!-- SHOWCASE -->
<section class="p-4 relative">
  <div class="flex items-center justify-between mb-2">
    <h2 class="text-purple-400 font-semibold tracking-wide">üî• Featured</h2>
    <span class="text-xs text-gray-400">Swipe or use arrows</span>
  </div>
  <button onclick="slideLeft()" aria-label="Previous" class="hidden sm:flex absolute left-4 top-1/2 -translate-y-1/2 bg-black/70 hover:bg-black/90 px-3 py-2 rounded-full border border-gray-800 z-10">‚óÄ</button>
  <button onclick="slideRight()" aria-label="Next" class="hidden sm:flex absolute right-4 top-1/2 -translate-y-1/2 bg-black/70 hover:bg-black/90 px-3 py-2 rounded-full border border-gray-800 z-10">‚ñ∂</button>
  <div class="overflow-hidden">
    <div id="showcase" class="flex gap-4 transition-transform duration-500 will-change-transform"></div>
  </div>
</section>

<!-- RECENT -->
<section class="p-4">
  <h2 class="text-green-400 font-semibold tracking-wide mb-2">üëÄ Recently Viewed</h2>
  <div id="recentBox" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-2 min-h-[4rem]"></div>
</section>

<!-- PRODUCTS -->
<main id="products" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3 p-3 pb-16"></main>

<!-- CART -->
<aside id="cartBox" class="fixed top-0 right-0 w-[320px] max-w-[80vw] h-full bg-[#050509] border-l border-gray-800 p-4 translate-x-full transition-transform duration-300 z-50 flex flex-col">
  <div class="flex items-center justify-between mb-2">
    <h3 class="font-semibold text-lg">Your Cart</h3>
    <button onclick="toggleCart()" class="text-gray-400 hover:text-gray-200 text-xl leading-none">‚úñ</button>
  </div>
  <div id="cartItems" class="mt-2 flex-1 overflow-y-auto text-sm space-y-2 pr-1"></div>
  <div class="pt-3 border-t border-gray-800 mt-3">
    <p class="font-bold text-base mb-2 flex justify-between">
      <span>Total:</span>
      <span>‚Çπ<span id="total">0</span></span>
    </p>
    <button onclick="checkout()" class="bg-green-600 hover:bg-green-700 w-full p-2 rounded-md font-semibold text-sm">Checkout via WhatsApp</button>
  </div>
</aside>

<!-- WISHLIST -->
<aside id="wishlistBox" class="fixed top-0 left-0 w-[320px] max-w-[80vw] h-full bg-[#050509] border-r border-gray-800 p-4 -translate-x-full transition-transform duration-300 z-50 flex flex-col">
  <div class="flex items-center justify-between mb-2">
    <h3 class="font-semibold text-lg">Wishlist</h3>
    <button onclick="toggleWishlist()" class="text-gray-400 hover:text-gray-200 text-xl leading-none">‚úñ</button>
  </div>
  <div id="wishlistItems" class="mt-2 flex-1 overflow-y-auto text-sm space-y-2 pr-1"></div>
</aside>

<!-- MODAL -->
<div id="modal" class="fixed inset-0 bg-black/80 hidden z-50 flex items-center justify-center px-3" onclick="closeModal()">
  <div id="modalInner" class="bg-[#101018] w-full max-w-lg rounded-xl p-4 shadow-2xl border border-gray-800" onclick="event.stopPropagation()">
    <div class="flex justify-between items-start mb-3">
      <h2 id="mTitle" class="text-2xl font-bold leading-tight"></h2>
      <button onclick="closeModal()" class="text-gray-400 hover:text-gray-200 text-xl">‚úñ</button>
    </div>
    <div class="rounded-lg overflow-hidden mb-3 bg-black">
      <iframe id="mVideo" class="w-full h-40 sm:h-56 md:h-64" allowfullscreen loading="lazy" title="Game trailer"></iframe>
    </div>
    <p id="mPrice" class="text-green-400 text-xl font-bold my-2"></p>
    <div class="grid grid-cols-2 gap-3 mt-3">
      <button id="mAdd" class="bg-purple-600 hover:bg-purple-700 py-3 rounded-lg text-base font-semibold">Add to Cart</button>
      <button id="mBuy" class="bg-green-600 hover:bg-green-700 py-3 rounded-lg text-base font-semibold">Buy Now</button>
    </div>
    <button id="mWish" class="mt-3 w-full bg-pink-600 hover:bg-pink-700 py-2 rounded-lg text-sm font-semibold">
      Add to Wishlist
    </button>
  </div>
</div>

<script>
  // ---------- DATA ----------
  const products = [
    {id:1,title:"Resident Evil Requiem",price:3607,old:4399,video:"https://www.youtube.com/embed/K0u_kAWLJOA",img:"https://wallpapers.com/images/hd/resident-evil-4-remake-leon-4k-9m1u8u5j7f5k4wvn.jpg"},
    {id:2,title:"Reanimal Deluxe",price:2160,old:2400,video:"https://www.youtube.com/embed/dQw4w9WgXcQ",img:"https://wallpapers.com/images/hd/dark-fantasy-game-wallpaper-4k-5m3xtq8x3x2mzyaw.jpg"},
    {id:3,title:"Core Keeper",price:899,old:0,video:"",img:"https://wallpapers.com/images/hd/core-keeper-game-art-4k-w8jvhc6iydk8m2ts.jpg"},
    {id:4,title:"Alice VR",price:1299,old:0,video:"",img:"https://wallpapers.com/images/hd/vr-game-desert-landscape-4k-2p0z47d6jq7c5qj0.jpg"}
  ];

  while (products.length < 40) {
    const i = products.length + 1;
    products.push({
      id:i,
      title:"Demo Game " + i,
      price:500 + i * 40,
      old:0,
      video:"https://www.youtube.com/embed/dQw4w9WgXcQ",
      img:"https://picsum.photos/400?random=" + i
    });
  }

  const showcaseGames = products.slice(0, 6);
  const upcomingGames = [
    {title:"GTA VI",date:"2025",img:"https://wallpapers.com/images/hd/gta-6-logo-fan-art-yx0zq0g5n1jzj0rf.jpg"},
    {title:"Witcher 4",date:"2025",img:"https://wallpapers.com/images/hd/the-witcher-wild-hunt-cover.jpg"},
    {title:"Far Cry 7",date:"2025",img:"https://wallpapers.com/images/hd/far-cry-6-cover-art.jpg"}
  ];

  // ---------- STATE ----------
  let cart = [];
  let recent = [];
  let wishlist = [];
  let showIndex = 0;
  let selected = null;

  function loadLocal(key, fallback) {
    try {
      const v = localStorage.getItem(key);
      return v ? JSON.parse(v) : fallback;
    } catch {
      return fallback;
    }
  }
  function saveLocal(key, value) {
    try {
      localStorage.setItem(key, JSON.stringify(value));
    } catch {}
  }

  cart = loadLocal("cart", []);
  recent = loadLocal("recent", []);
  wishlist = loadLocal("wishlist", []);

  // ---------- ELEMENTS ----------
  const showcase = document.getElementById("showcase");
  const upcomingTrack = document.getElementById("upcomingTrack");
  const recentBox = document.getElementById("recentBox");
  const productsDiv = document.getElementById("products");
  const cartCount = document.getElementById("cartCount");
  const cartItems = document.getElementById("cartItems");
  const totalEl = document.getElementById("total");
  const cartBox = document.getElementById("cartBox");
  const wishlistBox = document.getElementById("wishlistBox");
  const wishlistItems = document.getElementById("wishlistItems");
  const wishlistCount = document.getElementById("wishlistCount");
  const modal = document.getElementById("modal");
  const mTitle = document.getElementById("mTitle");
  const mPrice = document.getElementById("mPrice");
  const mVideo = document.getElementById("mVideo");
  const mAdd = document.getElementById("mAdd");
  const mBuy = document.getElementById("mBuy");
  const mWish = document.getElementById("mWish");
  const search = document.getElementById("search");
  const minP = document.getElementById("minP");
  const maxP = document.getElementById("maxP");
  const sortBy = document.getElementById("sortBy");

  // ---------- SHOWCASE ----------
  function renderShowcase() {
    showcase.innerHTML = showcaseGames.map(g => `
      <button class="showBox text-left hover:ring-2 hover:ring-purple-500/60 transition shadow-sm hover:shadow-lg" onclick="openModal(${g.id})">
        <img src="${g.img}" alt="${g.title}">
        <div class="mt-2 text-sm font-semibold line-clamp-2">${g.title}</div>
        <div class="price mt-1">‚Çπ${g.price}</div>
      </button>
    `).join("");
    updateShowcase();
  }
  function updateShowcase() {
    showcase.style.transform = `translateX(-${showIndex * 240}px)`;
  }
  function slideLeft() {
    if (showIndex > 0) {
      showIndex--;
      updateShowcase();
    }
  }
  function slideRight() {
    if (showIndex < showcaseGames.length - 1) {
      showIndex++;
      updateShowcase();
    }
  }
  window.slideLeft = slideLeft;
  window.slideRight = slideRight;

  // ---------- UPCOMING ----------
  function renderUpcoming() {
    const html = upcomingGames.map(g => `
      <div class="glass p-2 w-[160px] shrink-0 mx-2 flex flex-col">
        <div class="relative">
          <img src="${g.img}" alt="${g.title}" class="h-24 w-full object-cover rounded-md mb-1">
          <span class="absolute bottom-1 right-1 text-[10px] bg-black/70 px-1.5 py-0.5 rounded-full text-gray-100">Coming ${g.date}</span>
        </div>
        <small class="text-xs font-semibold mt-1">${g.title}</small>
      </div>
    `).join("");
    upcomingTrack.innerHTML = html + html;
  }

  // ---------- RECENT ----------
  function renderRecent() {
    if (!recent.length) {
      recentBox.innerHTML = `<p class="text-xs text-gray-500 col-span-full">No games viewed yet.</p>`;
      return;
    }
    recentBox.innerHTML = recent.map(p => `
      <button class="glass p-1 text-left hover:ring-1 hover:ring-green-500/50" onclick="openModal(${p.id})">
        <img src="${p.img}" alt="${p.title}" class="h-16 w-full object-cover rounded-md">
        <small class="text-[11px] mt-1 line-clamp-2 block">${p.title}</small>
      </button>
    `).join("");
  }

  function saveRecent(p) {
    recent = [p, ...recent.filter(x => x.id !== p.id)].slice(0, 6);
    saveLocal("recent", recent);
    renderRecent();
  }

  // ---------- PRODUCTS ----------
  function render() {
    let f = [...products];
    const q = search.value.trim().toLowerCase();
    const minVal = minP.value ? Number(minP.value) : null;
    const maxVal = maxP.value ? Number(maxP.value) : null;

    if (q) {
      f = f.filter(p => p.title.toLowerCase().includes(q));
    }
    if (minVal !== null && !isNaN(minVal)) {
      f = f.filter(p => p.price >= minVal);
    }
    if (maxVal !== null && !isNaN(maxVal)) {
      f = f.filter(p => p.price <= maxVal);
    }

    if (sortBy.value === "price-asc") {
      f.sort((a, b) => a.price - b.price);
    } else if (sortBy.value === "price-desc") {
      f.sort((a, b) => b.price - a.price);
    } else if (sortBy.value === "name-asc") {
      f.sort((a, b) => a.title.localeCompare(b.title));
    }

    if (!f.length) {
      productsDiv.innerHTML = `<p class="col-span-full text-center text-sm text-gray-500 py-8">No games found. Try different filters.</p>`;
      return;
    }

    productsDiv.innerHTML = f.map(p => {
      const off = p.old ? Math.round((1 - p.price / p.old) * 100) : 0;
      return `
        <div class="card">
          <button class="block w-full" onclick="openModal(${p.id})">
            <img src="${p.img}" alt="${p.title}" class="w-full h-36 object-cover">
          </button>
          <div class="p-2 space-y-1">
            <div class="text-sm font-semibold line-clamp-2 min-h-[2.5rem]">${p.title}</div>
            ${p.old ? `
              <div class="flex items-center justify-between text-xs mt-1">
                <span class="discount">-${off}%</span>
                <span class="old">‚Çπ${p.old}</span>
              </div>` : `<div class="h-5"></div>`}
            <div class="flex items-center justify-between mt-1">
              <div class="price">‚Çπ${p.price}</div>
              <div class="flex items-center gap-1">
                <button class="text-xs text-purple-300 hover:text-purple-100 underline"
                  onclick="event.stopPropagation(); addCart(${p.id});">Add</button>
                <button class="text-xs"
                  onclick="event.stopPropagation(); toggleWishlistItem(${p.id});">
                  <span id="wish-icon-${p.id}">‚ô°</span>
                </button>
              </div>
            </div>
            <button class="btn w-full py-2 mt-2 text-sm font-semibold" onclick="openModal(${p.id})">View Details</button>
          </div>
        </div>`;
    }).join("");

    updateWishlistIcons();
  }

  let filterTimer;
  [search, minP, maxP].forEach(inp => {
    inp.addEventListener("input", () => {
      clearTimeout(filterTimer);
      filterTimer = setTimeout(render, 200);
    });
  });
  sortBy.addEventListener("change", render);

  function applyChip(type) {
    if (type === "best-deals") {
      search.value = "";
      minP.value = "";
      maxP.value = "";
      // discount-only logic ko backend ya extra flag ke saath future me expand kar sakte ho
    } else if (type === "under-999") {
      search.value = "";
      minP.value = "";
      maxP.value = 999;
    } else if (type === "reset") {
      search.value = "";
      minP.value = "";
      maxP.value = "";
      sortBy.value = "";
    }
    render();
  }
  window.applyChip = applyChip;

  // ---------- MODAL ----------
  function openModal(id) {
    selected = products.find(x => x.id === id);
    if (!selected) return;

    mTitle.innerText = selected.title;
    mPrice.innerText = "‚Çπ" + selected.price;
    mVideo.src = selected.video || "";
    mAdd.onclick = () => { addCart(selected.id); closeModal(); };
    mBuy.onclick = () => { buyNow(selected); };
    mWish.onclick = () => toggleWishlistItem(selected.id);

    saveRecent(selected);
    updateWishlistIcons();
    modal.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }
  function closeModal() {
    modal.classList.add("hidden");
    mVideo.src = "";
    document.body.style.overflow = "";
  }
  window.openModal = openModal;
  window.closeModal = closeModal;

  // ---------- CART ----------
  function addCart(id) {
    const p = products.find(x => x.id === id);
    if (!p) return;
    const found = cart.find(x => x.id === id);
    if (found) {
      found.qty += 1;
    } else {
      cart.push({...p, qty:1});
    }
    saveCart();
  }

  function changeQty(id, delta) {
    const item = cart.find(x => x.id === id);
    if (!item) return;
    item.qty += delta;
    if (item.qty <= 0) {
      cart = cart.filter(x => x.id !== id);
    }
    saveCart();
  }

  function removeItem(id) {
    cart = cart.filter(x => x.id !== id);
    saveCart();
  }

  function saveCart() {
    saveLocal("cart", cart);
    renderCart();
  }

  function renderCart() {
    cartCount.innerText = cart.reduce((sum, item) => sum + item.qty, 0);
    if (!cart.length) {
      cartItems.innerHTML = `<p class="text-xs text-gray-500">Your cart is empty.</p>`;
      totalEl.innerText = "0";
      return;
    }
    let t = 0;
    cartItems.innerHTML = cart.map(i => {
      const lineTotal = i.price * i.qty;
      t += lineTotal;
      return `
        <div class="flex items-center justify-between bg-gray-900/70 rounded-md px-2 py-1.5">
          <div class="flex-1 mr-2">
            <p class="text-xs font-semibold line-clamp-2">${i.title}</p>
            <p class="text-[11px] text-gray-400">‚Çπ${i.price} √ó ${i.qty} = <span class="text-gray-100">‚Çπ${lineTotal}</span></p>
          </div>
          <div class="flex items-center gap-1">
            <button class="w-6 h-6 rounded-full bg-gray-800 text-xs" onclick="changeQty(${i.id}, -1)">-</button>
            <button class="w-6 h-6 rounded-full bg-gray-800 text-xs" onclick="changeQty(${i.id}, 1)">+</button>
            <button class="w-7 h-7 rounded-full bg-red-600 text-xs" onclick="removeItem(${i.id})">‚úï</button>
          </div>
        </div>
      `;
    }).join("");
    totalEl.innerText = t;
  }

  function toggleCart() {
    cartBox.classList.toggle("translate-x-full");
  }
  window.toggleCart = toggleCart;
  window.addCart = addCart;
  window.changeQty = changeQty;
  window.removeItem = removeItem;

  // ---------- WISHLIST ----------
  function toggleWishlist() {
    wishlistBox.classList.toggle("-translate-x-full");
  }
  window.toggleWishlist = toggleWishlist;

  function saveWishlist() {
    saveLocal("wishlist", wishlist);
    renderWishlist();
    updateWishlistIcons();
  }

  function toggleWishlistItem(id) {
    const exists = wishlist.find(x => x.id === id);
    if (exists) {
      wishlist = wishlist.filter(x => x.id !== id);
    } else {
      const p = products.find(x => x.id === id);
      if (!p) return;
      wishlist.push({ id: p.id, title: p.title, price: p.price, img: p.img });
    }
    saveWishlist();
  }
  window.toggleWishlistItem = toggleWishlistItem;

  function renderWishlist() {
    wishlistCount.innerText = wishlist.length;
    if (!wishlist.length) {
      wishlistItems.innerHTML = `<p class="text-xs text-gray-500">Wishlist is empty.</p>`;
      return;
    }
    wishlistItems.innerHTML = wishlist.map(w => `
      <div class="flex items-center gap-2 bg-gray-900/70 rounded-md px-2 py-1.5">
        <img src="${w.img}" alt="${w.title}" class="w-10 h-10 rounded object-cover">
        <div class="flex-1">
          <p class="text-xs font-semibold line-clamp-2">${w.title}</p>
          <p class="text-[11px] text-green-400">‚Çπ${w.price}</p>
        </div>
        <div class="flex flex-col gap-1">
          <button class="text-[11px] text-purple-300 hover:text-purple-100 underline"
            onclick="addCart(${w.id})">Add</button>
          <button class="text-[11px] text-red-400 hover:text-red-200"
            onclick="toggleWishlistItem(${w.id})">Remove</button>
        </div>
      </div>
    `).join("");
  }

  function updateWishlistIcons() {
    products.forEach(p => {
      const el = document.getElementById("wish-icon-" + p.id);
      if (!el) return;
      const isIn = wishlist.some(w => w.id === p.id);
      el.textContent = isIn ? "‚ô•" : "‚ô°";
    });
  }

  // ---------- CHECKOUT ----------
  function checkout() {
    if (!cart.length) return;
    let msg = "I want to buy:\n";
    let t = 0;
    cart.forEach((i, n) => {
      const line = i.price * i.qty;
      msg += `${n + 1}. ${i.title} x${i.qty} = ‚Çπ${line}\n`;
      t += line;
    });
    msg += `Total = ‚Çπ${t}`;
    window.open("https://wa.me/919313339081?text=" + encodeURIComponent(msg), "_blank");
  }
  function buyNow(p) {
    const msg = `I want to buy ${p.title} for ‚Çπ${p.price}`;
    window.open("https://wa.me/919313339081?text=" + encodeURIComponent(msg), "_blank");
  }
  window.checkout = checkout;
  window.buyNow = buyNow;

  // ---------- INIT ----------
  renderShowcase();
  renderUpcoming();
  render();
  renderCart();
  renderRecent();
  renderWishlist();
  updateWishlistIcons();
</script>
</body>
</html>
