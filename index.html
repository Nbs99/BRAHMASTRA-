<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Brahmastra Gaming Store</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;800&display=swap" rel="stylesheet">

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>
body{background:#0b0b10;color:#f9fafb}
.logoText{font-family:Orbitron;font-size:28px;letter-spacing:2px;
background:linear-gradient(90deg,#22c55e,#3b82f6,#a855f7);
-webkit-background-clip:text;-webkit-text-fill-color:transparent;
text-shadow:0 0 10px rgba(34,197,94,.5);text-align:center;width:100%}
.card{background:#0f1218;border:1px solid #1f2430;border-radius:16px;overflow:hidden;transition:.3s}
.card:hover{transform:translateY(-6px) scale(1.01);box-shadow:0 20px 40px rgba(0,0,0,.7)}
.price{color:#22c55e;font-weight:700}
.glass{background:rgba(17,24,39,.85);backdrop-filter:blur(12px);border:1px solid #333;border-radius:16px}
.upcoming-track{display:flex;gap:20px;width:max-content;animation:scrollLeft 30s linear infinite}
.upcoming-wrapper:hover .upcoming-track{animation-play-state:paused}
@keyframes scrollLeft{from{transform:translateX(0)}to{transform:translateX(-50%)}}
.hero{background:linear-gradient(to right, rgba(0,0,0,.8), rgba(0,0,0,.2)),
url("https://wallpapers.com/images/hd/gaming-4k-background-3840-x-2160-5n2p0b3w2vshz2k7.jpg") center/cover}
</style>
</head>
<body>

<!-- LOGIN -->
<div id="loginBox" class="fixed inset-0 bg-black/80 flex items-center justify-center z-50">
  <div class="bg-gray-900 p-6 rounded w-80">
    <h2 class="text-xl font-bold mb-3">Login / Signup</h2>
    <input id="email" placeholder="Email" class="w-full p-2 mb-2 bg-black border">
    <input id="password" type="password" placeholder="Password" class="w-full p-2 mb-2 bg-black border">
    <button onclick="login()" class="bg-purple-600 w-full py-2">Login</button>
    <button onclick="signup()" class="bg-gray-700 w-full py-2 mt-2">Signup</button>
  </div>
</div>

<!-- HEADER -->
<header class="sticky top-0 bg-black/80 backdrop-blur px-4 py-3 border-b border-gray-800 z-40 flex justify-between items-center">
  <div></div>
  <div class="logoText">BRAHMASTRA</div>
  <div class="flex gap-3">
    <button onclick="toggleWishlist()" class="bg-gray-800 px-3 py-1 rounded">‚ô° <span id="wishlistCount">0</span></button>
    <button onclick="toggleCart()" class="bg-gray-800 px-3 py-1 rounded">üõí <span id="cartCount">0</span></button>
  </div>
</header>

<!-- USER AREA -->
<div id="userArea" class="hidden">

<section class="hero h-[55vh] flex flex-col justify-center px-6">
  <h1 class="text-4xl font-bold mb-2">India‚Äôs Ultimate Gaming Store</h1>
  <p class="text-gray-300 mb-4 max-w-lg">Buy premium PC & console games instantly.</p>
  <button onclick="products.scrollIntoView({behavior:'smooth'})"
    class="bg-purple-600 px-5 py-3 rounded font-bold w-fit">Shop Now</button>
</section>

<section class="p-5">
  <h2 class="text-yellow-400 text-xl font-semibold mb-3">‚è≥ Upcoming Games</h2>
  <div class="upcoming-wrapper overflow-hidden glass">
    <div id="upcomingTrack" class="upcoming-track p-4"></div>
  </div>
</section>

<section class="p-4 bg-black/60 border-y border-gray-800">
  <input id="search" oninput="render()" placeholder="Search games..."
    class="w-full p-3 bg-black border border-gray-700 rounded">
</section>

<main id="products" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4 p-4 pb-24"></main>
</div>

<!-- CART -->
<aside id="cartBox" class="fixed top-0 right-0 w-80 h-full bg-black border-l border-gray-800 p-4 translate-x-full transition">
  <h3 class="font-bold mb-2">Your Cart</h3>
  <div id="cartItems" class="text-sm space-y-2"></div>
  <p class="font-bold mt-3">Total: ‚Çπ<span id="total">0</span></p>
  <button onclick="checkout()" class="bg-green-600 w-full py-3 mt-3 rounded font-bold">Checkout via WhatsApp</button>
</aside>

<!-- WISHLIST -->
<aside id="wishlistBox" class="fixed top-0 left-0 w-80 h-full bg-black border-r border-gray-800 p-4 -translate-x-full transition">
  <h3 class="font-bold mb-2">Wishlist</h3>
  <div id="wishlistItems" class="text-sm space-y-2"></div>
</aside>

<!-- MODAL -->
<div id="modal" class="fixed inset-0 bg-black/80 hidden flex items-center justify-center p-4" onclick="closeModal()">
  <div class="bg-gray-900 p-4 rounded-xl max-w-lg w-full" onclick="event.stopPropagation()">
    <h2 id="mTitle" class="text-2xl font-bold"></h2>
    <iframe id="mVideo" class="w-full h-60 my-3" allowfullscreen></iframe>
    <p id="mPrice" class="price text-xl"></p>
    <button id="mAdd" class="bg-purple-600 w-full py-3 mt-2 rounded font-bold">Add to Cart</button>
    <button id="mBuy" class="bg-green-600 w-full py-3 mt-2 rounded font-bold">Buy Now</button>
    <button id="mWish" class="bg-pink-600 w-full py-2 mt-2 rounded">Wishlist</button>
  </div>
</div>

<!-- ADMIN PANEL -->
<div id="adminPanel" class="hidden p-4 bg-black border-t border-gray-800">
  <h2 class="text-xl font-bold mb-2">Admin Panel</h2>
  <input id="pName" placeholder="Game Name" class="p-2 bg-black border mb-2 w-full">
  <input id="pPrice" placeholder="Price" type="number" class="p-2 bg-black border mb-2 w-full">
  <input id="pImg" placeholder="Image URL" class="p-2 bg-black border mb-2 w-full">
  <input id="pVideo" placeholder="YouTube Embed URL" class="p-2 bg-black border mb-2 w-full">
  <button onclick="addProduct()" class="bg-green-600 px-4 py-2">Add Game</button>
</div>

<script>
const firebaseConfig={
apiKey:"AIzaSyAW_N-mD7OHaTMwUZWWLNUHJgith3t4ToQ",
authDomain:"brahmastra-app.firebaseapp.com",
projectId:"brahmastra-app",
storageBucket:"brahmastra-app.firebasestorage.app",
messagingSenderId:"306469612802",
appId:"1:306469612802:web:4dcd061510b13e4d0d661b"
};
firebase.initializeApp(firebaseConfig);
const auth=firebase.auth();
const db=firebase.firestore();

/* LOGIN */
function login(){auth.signInWithEmailAndPassword(email.value,password.value).catch(e=>alert(e.message))}
function signup(){
auth.createUserWithEmailAndPassword(email.value,password.value).then(r=>{
db.collection("users").doc(r.user.uid).set({email:r.user.email,role:"user"})
}).catch(e=>alert(e.message))
}

/* ROLE CHECK */
auth.onAuthStateChanged(user=>{
 if(!user){
  loginBox.style.display="flex";
  userArea.classList.add("hidden");
  adminPanel.classList.add("hidden");
  return;
 }
 loginBox.style.display="none";
 db.collection("users").doc(user.uid).get().then(d=>{
  if(!d.exists)return;
  if(d.data().role==="admin"){
    adminPanel.classList.remove("hidden");
    userArea.classList.add("hidden");
  }else{
    adminPanel.classList.add("hidden");
    userArea.classList.remove("hidden");
  }
 })
});

/* UPCOMING */
const upcomingGames=[
{title:"GTA VI",img:"https://wallpapers.com/images/hd/gta-6-logo-fan-art-yx0zq0g5n1jzj0rf.jpg"},
{title:"Witcher 4",img:"https://wallpapers.com/images/hd/the-witcher-wild-hunt-cover.jpg"},
{title:"Far Cry 7",img:"https://wallpapers.com/images/hd/far-cry-6-cover-art.jpg"},
{title:"AC Hexe",img:"https://wallpapers.com/images/hd/assassins-creed-cover-art.jpg"}
];
function renderUpcoming(){
upcomingTrack.innerHTML=upcomingGames.map(g=>`
<div class="glass p-4 w-[320px] shrink-0">
<img src="${g.img}" class="h-52 w-full object-cover rounded mb-2">
<p class="font-semibold">${g.title}</p></div>`).join("")*2;
}
renderUpcoming();

/* PRODUCTS */
let products=[],cart=[],wishlist=[],selected=null;
db.collection("products").onSnapshot(s=>{
products=s.docs.map(d=>({id:d.id,...d.data()}));render()
});

/* ADMIN ADD */
function addProduct(){
db.collection("products").add({title:pName.value,price:+pPrice.value,img:pImg.value,video:pVideo.value,time:Date.now()});
pName.value=pPrice.value=pImg.value=pVideo.value="";
}

/* STORE */
function render(){
const q=search.value.toLowerCase();
productsDiv.innerHTML=products.filter(p=>p.title.toLowerCase().includes(q)).map(p=>`
<div class="card" onclick="openModal('${p.id}')">
<img src="${p.img}" class="h-56 w-full object-cover">
<div class="p-3"><div class="font-semibold mb-1">${p.title}</div>
<div class="price mb-2">‚Çπ${p.price}</div>
<button class="bg-purple-600 w-full py-2 rounded font-semibold"
onclick="event.stopPropagation();addCart('${p.id}')">Add to Cart</button></div></div>`).join("");
}
function openModal(id){
selected=products.find(x=>x.id===id);
mTitle.innerText=selected.title;
mPrice.innerText="‚Çπ"+selected.price;
mVideo.src=selected.video||"";
mAdd.onclick=()=>addCart(selected.id);
mBuy.onclick=()=>buyNow(selected);
mWish.onclick=()=>toggleWishlistItem(selected.id);
modal.classList.remove("hidden");
}
function closeModal(){modal.classList.add("hidden");mVideo.src="";}

/* CART */
function addCart(id){
const p=products.find(x=>x.id===id);
const f=cart.find(x=>x.id===id);
if(f)f.qty++;else cart.push({...p,qty:1});
renderCart();
}
function renderCart(){
cartCount.innerText=cart.reduce((s,i)=>s+i.qty,0);
let t=0;
cartItems.innerHTML=cart.map(i=>{
t+=i.price*i.qty;
return `<div class="flex justify-between"><span>${i.title} x${i.qty}</span><span>‚Çπ${i.price*i.qty}</span></div>`;
}).join("");
total.innerText=t;
}
function toggleCart(){cartBox.classList.toggle("translate-x-full");}

/* WISHLIST */
function toggleWishlist(){wishlistBox.classList.toggle("-translate-x-full");}
function toggleWishlistItem(id){
const p=products.find(x=>x.id===id);
if(wishlist.find(x=>x.id===id))wishlist=wishlist.filter(x=>x.id!==id);
else wishlist.push(p);
renderWishlist();
}
function renderWishlist(){
wishlistCount.innerText=wishlist.length;
wishlistItems.innerHTML=wishlist.map(w=>`
<div class="flex justify-between"><span>${w.title}</span>
<button onclick="addCart('${w.id}')">Add</button></div>`).join("");
}

/* CHECKOUT */
function checkout(){
if(!cart.length)return;
let msg="Order:\n",t=0;
cart.forEach((i,n)=>{msg+=`${n+1}. ${i.title} x${i.qty}\n`;t+=i.price*i.qty});
msg+=`Total ‚Çπ${t}`;
window.open("https://wa.me/919313339081?text="+encodeURIComponent(msg));
}
function buyNow(p){
window.open("https://wa.me/919313339081?text="+encodeURIComponent("Buy "+p.title+" ‚Çπ"+p.price));
}
</script>
</body>
</html>

